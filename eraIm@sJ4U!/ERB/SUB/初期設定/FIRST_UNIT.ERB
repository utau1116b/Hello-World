;-------------------------------------------------
;
;初期メンバーセレクト
;
;-------------------------------------------------

@START_UNIT_MEMBER_SELECT
SIF TFLAG:100 == 0
	TFLAG:100 = 0
CALL START_PARTNER_SHOW

$INPUT_LOOP
INPUT
IF RESULT == 1001
	;前のページ　0ページ以下にはならないようにする
	TFLAG:100 -= 1
	SIF TFLAG:100 <= 0
		TFLAG:100 = 0
	CALL START_PARTNER_SHOW
	GOTO INPUT_LOOP
ELSEIF RESULT == 1003
	;後のページ 最終ページ以上にはならないようにする
	TFLAG:100 += 1
	SIF TFLAG:100 >= 4
		TFLAG:100 = 3

	CALL START_PARTNER_SHOW
	GOTO INPUT_LOOP
ELSEIF RESULT == 0
	GOTO INPUT_LOOP
ELSEIF RESULT >= 100 && RESULT < (100 + FLAG:キャラ数)
	LOCAL:1 = RESULT
	CALL CHARA_MANUAL(LOCAL:1)
	CALL CHOOSE_MEMBER(LOCAL:1)
	IF RESULT == 0
		RESTART
	ELSE
		TARGET = P
		
		;[パートナー]付加 
		;TALENT:TARGET:150 = 1
		CALL NEWCHARA_INIT(P)
		;初期好感度
		CFLAG:TARGET:2 = 30
		CALL SEPLAY()
		PRINTFORMW ２人目のメンバーを「%NAME:TARGET%」に設定します
		FLAG:メンバー2 = TARGET
		;反抗的なキャラはツンデレにすることが可能
		IF TALENT:11 && TALENT:13 == 0 && TALENT:18 == 0
			CALL PLUS_TALENT18
			RETURN 1
		;真に不思議の根をつけるか選択可能
		ELSEIF NO:TARGET == 17
			CALL PLUS_TALENT120
			RETURN 1
		;小鳥に具現をつけるか選択可能
		ELSEIF NO:TARGET == 22
			CALL PLUS_TALENT127
			RETURN 1
		ENDIF
		RETURN 1
	ENDIF
	RETURN 1
ELSE
	PRINTFORML 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF
@START_UNIT_MEMBER_SELECT2
SIF TFLAG:100 == 0
	TFLAG:100 = 0
CALL START_PARTNER_SHOW

$INPUT_LOOP
INPUT
IF RESULT == 1001
	;前のページ　0ページ以下にはならないようにする
	TFLAG:100 -= 1
	SIF TFLAG:100 <= 0
		TFLAG:100 = 0
	CALL START_PARTNER_SHOW
	GOTO INPUT_LOOP
ELSEIF RESULT == 1003
	;後のページ 最終ページ以上にはならないようにする
	TFLAG:100 += 1
	SIF TFLAG:100 >= 4
		TFLAG:100 = 3

	CALL START_PARTNER_SHOW
	GOTO INPUT_LOOP
ELSEIF RESULT == 0
	GOTO INPUT_LOOP
ELSEIF RESULT >= 100 && RESULT < (100 + FLAG:キャラ数)
	LOCAL:1 = RESULT
	CALL CHARA_MANUAL(LOCAL:1)
	CALL CHOOSE_MEMBER(LOCAL:1)
	IF RESULT == 0
		RESTART
	ELSE
		TARGET = P
	
		;[パートナー]付加 
		;TALENT:TARGET:150 = 1
		CALL NEWCHARA_INIT(P)
		;初期好感度
		CFLAG:TARGET:2 = 30
		CALL SEPLAY()
		PRINTFORMW ３人目のメンバーを「%NAME:TARGET%」に設定します
		FLAG:メンバー3 = TARGET
		;反抗的なキャラはツンデレにすることが可能
		IF TALENT:11 && TALENT:13 == 0 && TALENT:18 == 0
			CALL PLUS_TALENT18
			RETURN 1
		;真に不思議の根をつけるか選択可能
		ELSEIF NO:TARGET == 17
			CALL PLUS_TALENT120
			RETURN 1
		;小鳥に具現をつけるか選択可能
		ELSEIF NO:TARGET == 22
			CALL PLUS_TALENT127
			RETURN 1
		ENDIF
		RETURN 1
	ENDIF
		RETURN 1
ELSE
	PRINTFORML 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF
