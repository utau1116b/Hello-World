@仲間勧誘
VARSET LOCAL
SIF TFLAG:100 == 0
	TFLAG:100 = 0
CALL 勧誘可能キャラ表示
PRINTFORML [ 0]戻る
$INPUT_LOOP
INPUT
IF RESULT == 1001
	;前のページ　0ページ以下にはならないようにする
	TFLAG:100 -= 1
	SIF TFLAG:100 <= 0
		TFLAG:100 = 0
	CALL 勧誘可能キャラ表示
	PRINTFORML [ 0]戻る
	GOTO INPUT_LOOP
ELSEIF RESULT == 1003
	;後のページ 最終ページ以上にはならないようにする
	TFLAG:100 += 1
	SIF TFLAG:100 >= 4
		TFLAG:100 = 3

	CALL 勧誘可能キャラ表示
	PRINTFORML [ 0]戻る
	GOTO INPUT_LOOP
ELSEIF RESULT == 0
	RETURN
ELSEIF RESULT >= 11 && RESULT < (11 + FLAG:キャラ数)
	LOCAL:1 = RESULT
	$INPUT_LOOP3
	CALL CHARA_MANUAL(RESULT + 89)
	DRAWLINE
	PRINTFORML このキャラクターを勧誘しますか？(%ADD_COMMA(契約金(LOCAL:1))%Ｇが必要です)
	PRINTFORML [0] はい
	PRINTFORML [1] いいえ
	PRINTFORMLC [2]外見を見る
	PRINTFORMLC [3]能力適正を見る
	$INPUT_LOOP2
	INPUT
	IF RESULT == 1
		RESTART
	ELSEIF RESULT == 2
		CALL SHOW_CHARA_LOOKS(LOCAL:1)
		WAIT
		GOTO INPUT_LOOP3
	ELSEIF RESULT == 3
		CALL SHOW_CHARA_DUNAMIS(LOCAL:1)
		WAIT
		GOTO INPUT_LOOP3
	ELSE
		IF MONEY < 契約金(LOCAL:1)
			REUSELASTLINE ゲイツが足りません…
			GOTO INPUT_LOOP2
		ENDIF
		MONEY -= 契約金(LOCAL:1)
		CALL NEWCHARA_INIT(LOCAL:1)
		PRINTFORMW %CALLNAME:(LOCAL:1)%を勧誘しました！
		;RETURN 1
	ENDIF
	;RETURN 1
ELSE
	REUSELASTLINE 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF
RESTART
@勧誘可能キャラ表示
DRAWLINE

PRINT ★★勧誘したいキャラを選択してください★★

PRINT   ( )内は契約金
PRINTL 　
CALL 勧誘可能キャラリスト
CALL PRINT_PAGESELECT(TFLAG:100, 3)
;ほぼ@PRINT_CHARA_LISTのコピー
@勧誘可能キャラリスト
VARSET LOCAL
LOCAL:1 = 0
N = 1
FOR LOCAL, 11,  (FLAG:キャラ数 + 11)
	;IF CFLAG:LOCAL:パートナー選択可 == 1 && LOCAL > 120 && TFLAG:100 == 3
		;番号が飛んでいる特殊なキャラ用の処理
	;ELSE
		;30キャラずつ表示
	SIF LOCAL > (30 + (30 * TFLAG:100)) || LOCAL <= (0 + (30 * TFLAG:100))
		CONTINUE
	;ENDIF
	T = LOCAL
	;勧誘済みのキャラは表示しない
	IF CFLAG:LOCAL:勧誘状況 == -1
	
	ELSE
		RESULT = 0
		PRINTFORM [{T, 3}]
		TRYCALLFORM KOJO_EXIST_K{T}
		SIF RESULT
			CALLFORM SET_COLOR(T)
		PRINTFORM  %CALLNAME:T,10,LEFT% 
		RESETCOLOR
		PRINTFORM (%ADD_COMMA(契約金(T)), 7%Ｇ)

		LOCAL:1 += 1
		IF LOCAL:1 % 3 == 0
			PRINTL 
		ELSE
			PRINT 　
		ENDIF
	ENDIF
NEXT
SIF LOCAL:1 % 3 != 0
	PRINTL 
RETURN 1
