;購買部処理
@KOUBAIBU
;LOCAL
;0		LOOP
;1-14	ITEM解放
;15		日替わり衣装の値段
;16		値段倍率
;17		アイテム袋拡張の値段
;50		入店時の所持金
VARSET I
;日替わりアイテムはいつもある
LOCAL:13 = 50 + RAND:8
LOCAL:14 = RAND:(FLAG:3 / 3 + 1) + 1
IF LOCAL:14 > 10
	LOCAL:14 = 10
ENDIF

;割引率計算
CALL GET_SALE_RATE
LOCAL:16 = RESULT

;入店時所持金記憶
LOCAL:50 = MONEY:0

$KOUBAIBU_START

DRAWLINE
PRINTFORML 　購買部   現在の所持金 %ADD_COMMA(MONEY:0)%Ｇ
DRAWLINE
PRINTFORML 『いらっしゃいませ。何をお買い求めですか？』
I:1 = 1
PRINTFORM [ 1] %ITEMNAME:101, 25, LEFT% (%ADD_COMMA(ITEMPRICE:スタミナドリンク * LOCAL:16 / 100), 7%Ｇ) 一人の
CALL STARMARK_Y
PRINTFORML を30回復する
I:2 = 1
PRINTFORM [ 2] %ITEMNAME:102, 25, LEFT% (%ADD_COMMA(ITEMPRICE:ミドルスタミナドリンク * LOCAL:16 / 100), 7%Ｇ) 一人の
CALL STARMARK_Y
PRINTFORML を100回復する
I:10 = 1
PRINTFORM [10] %ITEMNAME:110, 25, LEFT% (%ADD_COMMA(ITEMPRICE:エナジードリンク * LOCAL:16 / 100), 7%Ｇ) 1人の
CALL HEARTMARK_P
PRINTFORML を15回復する
I:15 = 1
PRINTFORML [15] %ITEMNAME:115, 25, LEFT% (%ADD_COMMA(ITEMPRICE:テキーラ * LOCAL:16 / 100), 7%Ｇ) 1人のVLを10上昇させる
I:20 = 1
PRINTFORML [20] %ITEMNAME:120, 25, LEFT% (%ADD_COMMA(ITEMPRICE:オレンジジュース * LOCAL:16 / 100), 7%Ｇ) 1人の状態異常を回復する
I:23 = 1
PRINTFORM [23] %ITEMNAME:123, 25, LEFT% (%ADD_COMMA(ITEMPRICE:アウェイクンドリンク * LOCAL:16 / 100), 7%Ｇ) 1人の気絶を
CALL STARMARK_Y
PRINTFORML 20で回復する
I:51 = 1
PRINTFORML [51] %ITEMNAME:151, 25, LEFT% (%ADD_COMMA(ITEMPRICE:ボーカルボム * LOCAL:16 / 100), 7%Ｇ) 小範囲にVo属性でダメージ・小を与える
I:52 = 1
PRINTFORML [52] %ITEMNAME:152, 25, LEFT% (%ADD_COMMA(ITEMPRICE:ダンスボム * LOCAL:16 / 100), 7%Ｇ) 小範囲にDa属性でダメージ・小を与える
I:53 = 1
PRINTFORML [53] %ITEMNAME:153, 25, LEFT% (%ADD_COMMA(ITEMPRICE:ビジュアルボム * LOCAL:16 / 100), 7%Ｇ) 小範囲にVi属性でダメージ・小を与える

PRINTFORML [ 0] 戻る

$INPUT_LOOP
INPUT
IF RESULT == 0
	RETURN
ELSE
	IF RESULT >= 1 && RESULT <= 100 && I:RESULT > 0
		IF MONEY:0 < (ITEMPRICE:(100 + RESULT) * LOCAL:16 / 100)
			PRINTFORMW ゲイツが足りません…
		ELSE
			MONEY:0 -= (ITEMPRICE:(100 + RESULT) * LOCAL:16 / 100)
			PRINTFORMW %ITEMNAME:(RESULT + 100)%を購入しました！
			CALL GET_ITEM(RESULT + 100)
		ENDIF
	ELSE
		REUSELASTLINE 正しい数値を入力してください
		GOTO INPUT_LOOP
	ENDIF
ENDIF
CALL CHECK_STORAGE
GOTO KOUBAIBU_START

