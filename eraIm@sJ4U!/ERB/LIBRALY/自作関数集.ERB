;ARGS 一番目の選択肢
;ARGS:1 二番目の選択肢
;ARGS:2 三番目の選択肢
;ARG	1ならカウントなし
;ARG:1	1ならログを消す
;一番目の選択しに対し1を,２番目なら2,３番目なら3を返す
;時間切れの時は-1を返す
@SELECT_CHOICE(ARGS, ARGS:1, ARGS:2, ARG, ARG:1)
SIF ARG:1 == 1
	CALL SAVELINE
GETCOLOR 
SIF RESULT
	LOCAL = RESULT
TSTR = 
;PRINTFORM 　　　　　　　
IF ARGS:2 != ""
	PRINTFORM 　　　　　　　
	PRINTFORM %TSTR, 20, LEFT%
	CALL SET_COLOR(20)
	PRINTFORM ┏━━━━━━━━━━┓
	PRINTL 
	PRINTFORM 　　　　　　　
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┃
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┃
	PRINTL 
	PRINTFORM 　　　　　　　
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┃
	RESETCOLOR
	LOCALS = %ARGS:2, 20, LEFT%
	;PRINTFORM %ARGS:2, 20, LEFT%
	PRINTBUTTON LOCALS , 3
	CALL SET_COLOR(20)
	PRINTFORM ┃
	PRINTL 
	PRINTFORM 　　　　　　　
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┃
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┃
	PRINTL 
	PRINTFORM 　　　　　　　
	PRINTFORM %TSTR, 20, LEFT%
	PRINTFORM ┗━━━━━━━━━━
	PRINTBUTTON "[3]", 3
	RESETCOLOR
	PRINTL
ENDIF
	PRINTFORM 　　　　　　　
CALL SET_COLOR(12)
PRINTFORM ┏━━━━━━━━━━┓
PRINTFORM %TSTR, 15, LEFT%
CALL SET_COLOR(11)
PRINTFORM  ┏━━━━━━━━━━┓
PRINTL 
	PRINTFORM 　　　　　　　
CALL SET_COLOR(12)
PRINTFORM ┃
PRINTFORM %TSTR, 20, LEFT%
PRINTFORM ┃
PRINTFORM %TSTR, 15, LEFT%
CALL SET_COLOR(11)
PRINTFORM  ┃
PRINTFORM %TSTR, 20, LEFT%
PRINTFORM ┃
PRINTL 
	PRINTFORM 　　　　　　　
CALL SET_COLOR(12)
PRINTFORM ┃
RESETCOLOR
LOCALS = %ARGS, 20, LEFT%
;PRINTFORM %ARGS, 20, LEFT%
PRINTBUTTON LOCALS, 1
CALL SET_COLOR(12)
PRINTFORM ┃
CALL SET_COLOR(11)
PRINTFORM %TSTR, 15, LEFT%
PRINTFORM  ┃
RESETCOLOR
LOCALS = %ARGS:1, 20, LEFT%
;PRINTFORM %ARGS:1, 20, LEFT%
PRINTBUTTON LOCALS, 2
CALL SET_COLOR(11)
PRINTFORM ┃
PRINTL 
	PRINTFORM 　　　　　　　
CALL SET_COLOR(12)
PRINTFORM ┃
PRINTFORM %TSTR, 20, LEFT%
PRINTFORM ┃
PRINTFORM %TSTR, 15, LEFT%
CALL SET_COLOR(11)
PRINTFORM  ┃
PRINTFORM %TSTR, 20, LEFT%
PRINTFORM ┃
PRINTL 
	PRINTFORM 　　　　　　　
CALL SET_COLOR(12)
PRINTFORM ┗━━━━━━━━━━
PRINTBUTTON "[1]", 1
PRINTFORM %TSTR, 15, LEFT%
CALL SET_COLOR(11)
PRINTFORM ┗━━━━━━━━━━
PRINTBUTTON "[2]", 2
RESETCOLOR
IF ARG
	INPUT
	IF RESULT == 1
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN 1
	ELSEIF RESULT == 2
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN 2
	ELSEIF RESULT == 3
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN 3
	ELSE
		SIF ARG:1 == 1
			CALL RETURNLINE
		RETURN -1
	ENDIF
ELSE
	TINPUT 5000, -1, 1, "タイムアップ"
	IF RESULT == 1
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN 1
	ELSEIF RESULT == 2
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN 2
	ELSEIF RESULT == 3
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
	; && ARG == 3
			RETURN 3
	ELSEIF RESULT == -1
		SIF LOCAL
			SETCOLOR LOCAL
			SIF ARG:1 == 1
				CALL RETURNLINE
			RETURN -1
	ELSE
		SIF ARG:1 == 1
			CALL RETURNLINE
		RETURN -1
	ENDIF
ENDIF
	
RESTART

;-------------------------------------------------
;Im@sJ用関数
;-------------------------------------------------
;思い出？ピンクのハートの出力
@HEARTMARK_P
CALL SET_COLOR(16)
GETFONT
CHKFONT "Times New Roman"
SIF RESULT
	SETFONT "Times New Roman"
PRINTFORM %UNICODE(0x2665),2,LEFT%
SETFONT RESULTS
RESETCOLOR

;UI合せ用　黒のハートの出力
@HEARTMARK_B

SETCOLOR (GETBGCOLOR())
GETFONT
CHKFONT "Times New Roman"
SIF RESULT
	SETFONT "Times New Roman"
PRINTFORM %UNICODE(0x2665),2,LEFT%
SETFONT RESULTS
RESETCOLOR

;黄色い★の出力
@STARMARK_Y
CALL SET_COLOR(19)
;PRINTFORM ★
;GETFONT
;CHKFONT "Times New Roman"
;SIF RESULT
;	SETFONT "Times New Roman"
PRINTFORM %UNICODE(0x2605),2,LEFT%
;PRINTFORM ★
;SETFONT RESULTS
RESETCOLOR

;何度も使うので関数化
@再入力
REUSELASTLINE 入力値が不正です。再入力して下さい

;ARGS	表示したい文字列
;ARG	始色
;ARG:1	減少率
;ARG:2	PRITL,PRINTWで記述
@PRINTGRAD(ARG, ARG:1, ARGS, ARG:2)
#LOCALSIZE 1
LOCAL = STRLENSU(ARGS)
REPEAT LOCAL
	SETCOLOR ARG - (ARG:1 * COUNT)
	PRINTFORM %SUBSTRINGU(ARGS, COUNT, 1)%
REND
RESETCOLOR
IF ARG:2 == 1
	PRINTL 
ELSEIF ARG:2 == 2
	PRINTW 
ENDIF
RETURN RESULT

@PRINTGRADL(ARG, ARG:1, ARGS)
CALL PRINTGRAD(ARG, ARG:1, ARGS, 1)
RETURN RESULT

@PRINTGRADW(ARG, ARG:1, ARGS)
CALL PRINTGRAD(ARG, ARG:1, ARGS, 2)
RETURN RESULT


;ARG	ミリ秒カウントダウン
@COUNTDOWN(ARG)
#LOCALSIZE 3
ALIGNMENT CENTER
LOCAL:1 = ARG / 100
CALL SAVELINE
FONTBOLD
FOR LOCAL, 0, 150
	PRINTL 
NEXT
FOR LOCAL, LOCAL:1 , 0, -1
	SIF LOCAL != LOCAL:1
		CLEARLINE 11
	IF LOCAL > 1
		LOCAL:2 = (LOCAL + 10) % 10
		LOCAL:2 = LOCAL - LOCAL:2
		PRINTFORML {LOCAL:2 / 10}
	ELSE
		PRINTFORML 0
	ENDIF
	REPEAT 10
		PRINTL
	REND
	
	TWAIT 100, 0
NEXT
FONTREGULAR
CALL RETURNLINE
ALIGNMENT LEFT
RETURN RESULT

;サイネリアと閣下は特殊処理
;ARG	名前を表示するキャラ
;ARG:1	0,下の名前	1,苗字	2,フルネーム
;ARG:2	1,フルネームの時　苗字と下の名前の間に半角スペースを入れる
;ARG:3	1,特殊処理の時　ニックネームを返す
@名前, ARG, ARG:1, ARG:2, ARG:3
#FUNCTIONS
#LOCALSIZE 1
#LOCALSSIZE 1
VARSET LOCALS
IF (ARG == 30 || ARG == 100) && ARG:3 > 0
	IF ARG == 30
		LOCALS = サイネリア
	ELSEIF ARG == 100
		LOCALS = 閣下
	ELSE
		LOCALS = ""
	ENDIF
ELSE
	SELECTCASE ARG:1
		CASE 1
			LOCAL = STRFIND(@"%NAME:ARG%", @"%CALLNAME:ARG%")
			LOCALS = %SUBSTRING(@"%NAME:ARG%", , LOCAL)%
		CASE 2
			LOCAL = STRFIND(@"%NAME:ARG%", @"%CALLNAME:ARG%")
			LOCALS = %SUBSTRING(@"%NAME:ARG%", , LOCAL)%
			IF ARG:2 > 0
				LOCALS = %LOCALS% %CALLNAME:ARG%
			ELSE
				LOCALS = %LOCALS%%CALLNAME:ARG%
			ENDIF
		CASEELSE
			
	ENDSELECT
ENDIF
RETURNF LOCALS

@メンバー数()
#FUNCTION
#LOCALSIZE 2
VARSET LOCAL
FOR LOCAL, 1080, 1085
	SIF FLAG:LOCAL > 0
		LOCAL:1++
NEXT
RETURNF LOCAL:1

@一万()
#FUNCTION
RETURNF 10000
;スコア算出時にミスしやすい一億を返す
@一億()
#FUNCTION
RETURNF (100 * 100 * 100 * 100)
@一兆()
#FUNCTION
RETURNF 一億()*一万()
;勧誘済みのメンバーの能力合計値
@SUM_ABL(ARG)
#FUNCTION
VARSET LOCAL
FOR LOCAL, 0, CHARANUM
	SIF LOCAL == MASTER || CFLAG:LOCAL:勧誘状況 != -1 || CFLAG:LOCAL:21
		CONTINUE
	SIF ABL:LOCAL:ARG
		LOCAL:1 += ABL:LOCAL:ARG
NEXT
RETURNF LOCAL:1

;一発ネタ用関数
;2013年以降、リアルで今日がお正月かどうか返す
@IS_お正月
#FUNCTION
IF TOINT(SUBSTRING(GETTIMES(), ,4)) > 2012
	LOCAL = GETTIME() / (10 * 一億())
	SIF LOCAL % 10000 ==101
		RETURNF 1 
ENDIF
RETURNF 0
