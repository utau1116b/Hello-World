@ファン数変動
VARSET LOCAL
FOR LOCAL, 1017, 1023

		;上限、下限キャップをかける
	SIF FLAG:LOCAL > 100
		FLAG:LOCAL = 100
	SIF FLAG:LOCAL < 0
		FLAG:LOCAL = 0
		
	;注目度とファン数を管理するフラグの番号を合わせる
	SELECTCASE LOCAL
		CASE 1017
			LOCAL:2 = 51
		CASE 1018
			LOCAL:2 = 52
		CASE 1019
			LOCAL:2 = 53
		CASE 1020
			LOCAL:2 = 54
		CASE 1021
			LOCAL:2 = 55
		CASE 1022
			LOCAL:2 = 56
		CASEELSE
	ENDSELECT
	
		;キャラクターごとにファン数を変動
	FOR LOCAL:1, 11, FLAG:キャラ数
		LOCAL:3 = ABL:(LOCAL:1):(LOCAL:2)
		LOCAL:3 *= 10000
			;注目度でファン数変動
		SELECTCASE FLAG:LOCAL
			CASE 0 TO 20
					TIMES LOCAL:3, 0.95
			CASE 21 TO 40
					TIMES LOCAL:3, 0.97
			CASE 41 TO 60
					TIMES LOCAL:3, 0.98
				;変動なし
			CASE 61 TO 80
					
			CASEELSE
				;PRINTFORMW エラー！不明な注目度{FLAG:LOCAL}が選ばれました(ファン数変動)
		ENDSELECT
		
		LOCAL:3 /= 10000
		ABL:(LOCAL:1):(LOCAL:2) = LOCAL:3
	NEXT
NEXT

;合計ファン数を返す関数
@SUM_ファン数()
#FUNCTION
#LOCALSIZE 1
#DIM ファン合計
VARSET LOCAL
ファン合計 = 0
FOR LOCAL, 11, 11 + FLAG:キャラ数
	IF CFLAG:LOCAL:勧誘状況 == -1
		ファン合計 += 全国ファン数(LOCAL)
	ENDIF
NEXT
RETURNF ファン合計


;ARG	地方
@地方ファン数(ARG)
#FUNCTION
#LOCALSIZE 3
VARSET LOCAL
SELECTCASE ARG
	CASE 0
		LOCAL:1 = 52
	CASE 1
		LOCAL:1 = 51
	CASE 2
		LOCAL:1 = 53
	CASE 3
		LOCAL:1 = 54
	CASE 4
		LOCAL:1 = 55
	CASE 5
		LOCAL:1 = 56
	CASEELSE
		LOCAL:1 = 0
ENDSELECT

FOR LOCAL, 11, FLAG:キャラ数
	SIF CFLAG:LOCAL:勧誘状況 != -1
		CONTINUE
	LOCAL:2 += ABL:LOCAL:(LOCAL:1)
NEXT

RETURNF LOCAL:2

@全国ファン数(ARG)
#FUNCTION
#LOCALSIZE 2
VARSET LOCAL
FOR LOCAL, 51, 57
	LOCAL:1 += ABL:ARG:LOCAL
NEXT
RETURNF LOCAL:1

