@給料計算
VARSET LOCAL
FOR LOCAL, 0, CHARANUM
	SIF LOCAL == MASTER || CFLAG:LOCAL:勧誘状況 != -1 || CFLAG:LOCAL:21
		CONTINUE
	LOCAL:1 = ABL:LOCAL:浪費癖
	LOCAL:2 = ABL:LOCAL:アイドルランク
	SELECTCASE LOCAL:1
		CASE IS <20
			LOCAL:1 *= 2
			LOCAL:1 += LOCAL:2*10
		CASE IS <50
			LOCAL:1 *= 5
			LOCAL:1 += LOCAL:2*50
		CASE IS <=70
			;3000円くらい
			;春香さん
			;500
			LOCAL:1 *= 7
			LOCAL:1 += LOCAL:2*80
		CASE IS <100
			LOCAL:1 *= 9
			LOCAL:1 += LOCAL:2*100
		CASE IS <150
			LOCAL:1 *= 12
			LOCAL:1 += LOCAL:2*120
		CASE IS <180
			LOCAL:1 *= 13
			LOCAL:1 += LOCAL:2*150
		CASE IS <200
			LOCAL:1 *= 15
			LOCAL:1 += LOCAL:2*180
		;>>>>>越えられない壁>>>>>>>>
		CASE IS <300
			;舞さん
			LOCAL:1 *= 32
			LOCAL:1 += LOCAL:2*350
		CASE IS <600
			;閣下
			LOCAL:1 *= 55
			LOCAL:1 += LOCAL:2*765
		CASEELSE
			
	ENDSELECT
	IF MATCH(FLAG,LOCAL,1080,1085)
		SIF FLAG:仕事成功 == 1
			TIMES LOCAL:1, 1.50
		SIF FLAG:仕事成功 == -1
			TIMES LOCAL:1, 1.20
	;待機中行動
	ELSE
		
	ENDIF
	;金銭感覚による軽減
	IF !ABL:LOCAL:金銭感覚

	ELSEIF ABL:LOCAL:金銭感覚 < 5
		LOCAL:1 = 一兆()*LOCAL:1*((100-ABL:LOCAL:金銭感覚*5)/100)/一兆()
	ELSEIF ABL:LOCAL:金銭感覚 < 10
		LOCAL:1 = 一兆()*LOCAL:1*(75-((ABL:LOCAL:金銭感覚-5)*3)/100)/一兆()
	ELSE
		LOCAL:1 = 一兆()*LOCAL:1*((50-(ABL:LOCAL:金銭感覚-10)/2)/100)/一兆()
	ENDIF
	
	;夜は寝てる時間も多いので維持費が半分
	SIF TIME && TIME:12
		LOCAL:1 /= 2

	;雨の日は経費ダウン
	SIF TIME:5 == 3 || TIME:5 == 7
		TIMES LOCAL:1 , 0.90
	SIF TIME:5 == 4
		TIMES LOCAL:1 , 0.60
	
	CFLAG:LOCAL:給料 += LOCAL:1
NEXT
@給料支払い
VARSET LOCAL
;事務能力による軽減
FOR LOCAL, 0, CHARANUM
	SIF LOCAL == MASTER || CFLAG:LOCAL:勧誘状況 != -1 || CFLAG:LOCAL:21
		CONTINUE
	LOCAL:1 = CFLAG:LOCAL:給料 * 一兆()
	;パートナーボーナス
	SIF TALENT:LOCAL:パートナー
		TIMES LOCAL:1, 0.80
	SIF TALENT:LOCAL:倹約家
		TIMES LOCAL:1, 0.80
	;難易度による軽減
	SELECTCASE FLAG:難易度
		CASE 0
			LOCAL:1 /= 2
		CASE 1
			
		CASE 2
			TIMES LOCAL:1, 1.50
		CASE 3
			TIMES LOCAL:1, 2.00
		CASEELSE
	ENDSELECT
	LOCAL:1 = LOCAL:1*(100-SUM_ABL(23))/100
	LOCAL:1 /= 4
	LOCAL:1 /= 一兆()
	CFLAG:LOCAL:給料 = LOCAL:1
	LOCAL:2 += CFLAG:LOCAL:給料
NEXT
MONEY -= LOCAL:2

RETURN LOCAL:2
;LOCAL:2 = SET_給料(LOCAL:2)

;式中で使うので、個別呼び出し禁止
@SET_給料(ARG)
#FUNCTION
#LOCALSIZE 1
SIF !ARG
	RETURNF LOCAL
LOCAL = ARG
RETURNF LOCAL

@給料()
#FUNCTION
#LOCALSIZE 2
RETURNF SET_給料()

@給料明細
CALL SAVELINE
FOR LOCAL, 0, CHARANUM
	SIF LOCAL == MASTER || CFLAG:LOCAL:勧誘状況 != -1 || CFLAG:LOCAL:21 || !CFLAG:LOCAL:給料
		CONTINUE
	PRINTPLAINFORM [{LOCAL, 3}]%CALLNAME:LOCAL, 12, LEFT%
	PRINTFORML {CFLAG:LOCAL:給料}Ｇ
NEXT
WAIT
CALL RETURNLINE
RETURN
