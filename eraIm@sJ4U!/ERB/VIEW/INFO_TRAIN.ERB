;595行目付近をコメントアウトすると、パラメータ表示のゲージが
;従来の現在のレベル→次のレベルに必要な量を基準としたものから
;パラメータの総量を基準にしたものになります。
;例えば、パラメータが5000（レベル３）のときはこんな感じに。
;　新型 [****....] Now:5000 / Next:10000 （総量として必要な10000が基準）
;　従来 [**......] Now:2000 / Next: 1000 （LV3→LV4に必要な1000が基準）
;595行目付近にも同じものが書いてあります

@SHOW_INFO(ARG:0)
;ARG:0 対象
;新型表示
;W = TARGET
DRAWLINE
PRINTL □ 経験
CALL NEW_PRINT_EXP(ARG:0)
DRAWLINE
PRINTL □ 能力
CALL NEW_PRINT_ABL(ARG:0)
DRAWLINE
PRINTL □ 刻印
CALL NEW_PRINT_MARK(ARG:0)
DRAWLINE
PRINTL □ 素質
CALL NEW_PRINT_TALENT(ARG:0)
CALL SHOW_DAY_INFO(ARG:0)
;テスト陰毛
SIF ARG:0 != 0
	CALL INMOU_INFO(ARG:0)

WAIT

@SHOW_STATUS_NAME
;TSTR:0にプレイヤー、TSTR:1にパートナーの名前入力。
;妊娠機能ONなら危険日・生理表示も追加する
IF (FLAG:62 & 1)
	;危険日・生理表示
	VARSET TSTR, ""
	;プレイヤー名
	TSTR:0 = %NAME:PLAYER%
	SIF ASSIPLAY
		TSTR:0 = %TSTR:0%(助手)
	SIF TALENT:PLAYER:137
		TSTR:0 = %TSTR:0%(危険日)
	SIF TALENT:PLAYER:138
		TSTR:0 = %TSTR:1%(生理)
	;パートナー名
	TSTR:1 = %NAME:TARGET%
	SIF TALENT:137
		TSTR:1 = %TSTR:1%(危険日)
	SIF TALENT:138
		TSTR:1 = %TSTR:1%(生理)
ELSE
	VARSET TSTR, ""
	;プレイヤー名
	TSTR:0 = %NAME:PLAYER%
	SIF ASSIPLAY
		TSTR:0 = %TSTR:0%(助手)
	;パートナー名
	CALL SET_COLOR(NO:TARGET)
	TSTR:1 = %NAME:TARGET%
	RESETCOLOR
ENDIF

;アニメーションはeraReberse_ぽ0617を参考に
@SHOW_STATUS
VARSET LOCAL
TFLAG:COMABLE管理 = 0
;TFLAG:100 = TFLAG:101
;SIF TFLAG:101 == 1
;	TFLAG:100 = 0
;SIF TFLAG:101
;	TFLAG:101 --
;USERCOMを呼び出すと、同時に必要じゃない部分でコマンドを呼び出すので消去
;IF FLAG:23 & 1p31
;	CALL SAVELINE
;ELSE
;DOTRAIN終了時に折る
;またCALLTRAINがDOTRAINで最後までいけなかったときのために折る
;TFLAG:DOTRAIN = 0
;TFLAG:CALLTRAIN = 0
;現在のムードの値をTFLAG:95に入れておく
TFLAG:95 = TFLAG:37
DRAWLINE
CALL YOUBI
PRINTFORML {DAY:3}年 %STR:2%月 {DAY:1}日 (%STR:1%) 天気:%STR:3% {DAY+1}日目(%STR:4%)  所持金：%ADD_COMMA(MONEY)%Ｇ
;TSTR:0にプレイヤー、TSTR:1にパートナーの名前入力
CALL SHOW_STATUS_NAME
;主導権を持っている側を先に表示
IF TFLAG:45
	CALL PRINTCOLOR((SET_COLOR_FUNC(TARGET)), @"%TSTR:1%")
	PRINTFORM が
	CALL PRINTCOLOR ((SET_COLOR_FUNC(PLAYER)), @"%TSTR:0%")
	PRINTFORM と一緒です
ELSE
	CALL PRINTCOLOR ((SET_COLOR_FUNC(PLAYER)), @"%TSTR:0%")
	PRINT が
	CALL PRINTCOLOR((SET_COLOR_FUNC(TARGET)), @"%TSTR:1%")
	PRINTFORM と一緒です
ENDIF
PRINT   
PRINTL 
;最大体力等調整処理
CALL LIFE_LIMIT

CALL SHOW_EQUIP_2

PRINT 体力
SIF BASE:0 < 0
	BASE:0 = 0
;CALL PRINT_BAR_0, BASE:0, MAXBASE:0, 32
CALL COMMON_SHOW_LIFEBAR1, TARGET, 1
PRINTFORML ({BASE:0,4}/{MAXBASE:0,4})

PRINT 気力
SIF BASE:1 < 0
	BASE:1 = 0
CALL COMMON_SHOW_LIFEBAR2, TARGET, 1
;CALL PRINT_BAR_VIT, BASE:1, MAXBASE:1, 32
PRINTFORML ({BASE:1,4}/{MAXBASE:1,4})

IF (FLAG:23 & 262144) != 0
	;幸福加減表示
	CALL INTOXICATION_SHOW
	;ムード
	;CALL MOOD_SHOW
ENDIF

;新型表示
CALL NEW_PRINT_PALAM
	DRAWLINE
	
	;以下衣装表示
	;PRINTFORML %CALLNAME:MASTER, 10%の衣装：[ソックス]
	;PRINTFORML %CALLNAME:TARGET, 10%の衣装：[ソックス]
	CALL SHOW_EQUIP_3(2)
	CALL SHOW_EQUIP_3(1)
	DRAWLINE
SIF EX:0 || EX:1 || EX:2 || EX:3 || EX:4 || EX:5 || EX:6
	PRINT < 
SIF EX:0
	PRINTFORM C絶頂:{EX:0}回 
SIF EX:1
	PRINTFORM V絶頂:{EX:1}回 
SIF EX:2
	PRINTFORM A絶頂:{EX:2}回 
SIF EX:3
	PRINTFORM B絶頂:{EX:3}回 
SIF EX:6
	PRINTFORM M絶頂:{EX:6}回 
SIF EX:4
	PRINTFORM 噴乳:{EX:4}回 
SIF EX:5
	PRINTFORM 射精:{EX:5}回 
SIF EX:0 || EX:1 || EX:2 || EX:3 || EX:4 || EX:5 || EX:6
	PRINTL >

;射精値設定
IF TALENT:TARGET:133
	MAXBASE:TARGET:2 = 5000
ELSE
	MAXBASE:TARGET:2 = 10000
ENDIF
IF TALENT:MASTER:133
	MAXBASE:MASTER:2 = 5000
ELSE
	MAXBASE:MASTER:2 = 10000
ENDIF
IF ASSI >= 0
	IF TALENT:ASSI:133
		MAXBASE:ASSI:2 = 5000
	ELSE
		MAXBASE:ASSI:2 = 10000
	ENDIF
ENDIF

SIF MAXBASE:MASTER:6 == 0
	MAXBASE:MASTER:6 = 10000

IF TALENT:MASTER:119 || TALENT:MASTER:121 || TALENT:MASTER:122
	PRINT 射精 
	CALL PRINT_BAR, BASE:MASTER:2, MAXBASE:MASTER:2, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
	PRINTFORM  ({BASE:MASTER:2}/{MAXBASE:MASTER:2})
	IF TEQUIP:MASTER:85 == 1
		PRINTFORML  [コンドーム着用]
	ELSE
		PRINTFORML  
	ENDIF
ENDIF

IF (FLAG:62 & 4096) && TFLAG:44 && ASSIPLAY == 0
	PRINTFORM 耐力（%NAME:MASTER%）
	CALL PRINT_BAR_4, BASE:MASTER:HP, MAXBASE:MASTER:HP, 32
	PRINTFORML ({BASE:MASTER:HP}/{MAXBASE:MASTER:HP})
	;精神絶頂
;	PRINTFORM %BASENAME:6%（%NAME:MASTER%）
;	CALL PRINT_BAR, BASE:MASTER:6, MAXBASE:MASTER:6, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("緑"), RESULT:1
;	PRINTFORML ({BASE:MASTER:6}/{MAXBASE:MASTER:6})
ENDIF

IF ASSIPLAY
	IF TALENT:ASSI:119 || TALENT:ASSI:121 || TALENT:ASSI:122
		PRINT 射精(助手)
		CALL PRINT_BAR, BASE:ASSI:2, MAXBASE:ASSI:2, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
		PRINTFORM ({BASE:ASSI:2}/{MAXBASE:ASSI:2})
		IF TEQUIP:ASSI:85 == 1
			PRINTFORML  [コンドーム着用]
		ELSE
			PRINTFORML  
		ENDIF
	ENDIF
ENDIF

IF TALENT:TARGET:119 || TALENT:TARGET:121 || TALENT:TARGET:122
	PRINTFORM 射精（%NAME:TARGET%）
	CALL PRINT_BAR, BASE:2, MAXBASE:2, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
	PRINTFORM ({BASE:2}/{MAXBASE:2})
	IF TEQUIP:85 == 1
		PRINTFORML  [コンドーム着用]
	ELSE
		PRINTFORML  
	ENDIF
ENDIF

IF TALENT:TARGET:130
	SIF MAXBASE:3 == 0
		MAXBASE:3 = 10000
	PRINTFORM 母乳（%NAME:TARGET%）
	CALL PRINT_BAR, BASE:3, MAXBASE:3, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
	PRINTFORML ({BASE:3}/{MAXBASE:3})
ENDIF

IF TEQUIP:90
	SIF MAXBASE:MASTER:7 == 0
		MAXBASE:MASTER:7 = 10000
	PRINT 射精（触手）
	CALL PRINT_BAR, BASE:MASTER:7, MAXBASE:MASTER:7, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
	PRINTFORML ({BASE:MASTER:7}/{MAXBASE:MASTER:7})
ENDIF
;eraSQJ用接触部位管理の処理
TRYCALL SHOW_TOUCH
CALL SHOW_EQUIP_1

;誘う処理
;SIF TEQUIP:25 && TFLAG:54 == 0
;パートナーのターン処理(暫定)
CALL BEFORE_PASSIVE

@STAIN_INFO

REPEAT 6
	SIF COUNT == 2 && TALENT:MASTER:119 == 0 && TALENT:MASTER:121 == 0 && TALENT:MASTER:122 == 0
		CONTINUE
	SIF COUNT == 3 && TALENT:MASTER:122
		CONTINUE
	SIF COUNT == 5 && TALENT:MASTER:122
		CONTINUE
	PRINTS NAME:MASTER
	IF COUNT == 0
		PRINT の口：
	ELSEIF COUNT == 1
		PRINT の手：
	ELSEIF COUNT == 2
		PRINT のＰ：
	ELSEIF COUNT == 3
		PRINT のＶ：
	ELSEIF COUNT == 4
		PRINT のＡ：
	ELSEIF COUNT == 5
		PRINT のＢ：
	ENDIF
	SIF STAIN:MASTER:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:MASTER:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:MASTER:COUNT & 4
		PRINT <精>
	SIF STAIN:MASTER:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:MASTER:COUNT & 16
		PRINT <乳>
	PRINTL 
REND

REPEAT 6
	SIF COUNT == 2 && TALENT:119 == 0 && TALENT:121 == 0 && TALENT:122 == 0
		CONTINUE
	SIF COUNT == 3 && TALENT:122
		CONTINUE
	SIF COUNT == 5 && TALENT:122
		CONTINUE
	PRINTS NAME:TARGET
	IF COUNT == 0
		PRINT の口：
	ELSEIF COUNT == 1
		PRINT の手：
	ELSEIF COUNT == 2
		PRINT のＰ：
	ELSEIF COUNT == 3
		PRINT のＶ：
	ELSEIF COUNT == 4
		PRINT のＡ：
	ELSEIF COUNT == 5
		PRINT のＢ：
	ENDIF
	
	SIF STAIN:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:COUNT & 4
		PRINT <精>
	SIF STAIN:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:COUNT & 16
		PRINT <乳>
	PRINTL 
REND

REPEAT 6
	SIF ASSI < 0
		BREAK
	SIF COUNT == 2 && TALENT:ASSI:119 == 0 && TALENT:ASSI:121 == 0 && TALENT:ASSI:122 == 0
		CONTINUE
	SIF COUNT == 3 && TALENT:ASSI:122
		CONTINUE
	SIF COUNT == 5 && TALENT:ASSI:122
		CONTINUE
	PRINTS NAME:ASSI
	IF COUNT == 0
		PRINT の口：
	ELSEIF COUNT == 1
		PRINT の手：
	ELSEIF COUNT == 2
		PRINT のＰ：
	ELSEIF COUNT == 3
		PRINT のＶ：
	ELSEIF COUNT == 4
		PRINT のＡ：
	ELSEIF COUNT == 5
		PRINT のＢ：
	ENDIF
	
	SIF STAIN:ASSI:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:ASSI:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:ASSI:COUNT & 4
		PRINT <精>
	SIF STAIN:ASSI:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:ASSI:COUNT & 16
		PRINT <乳>
	PRINTL 
REND

WAIT

@SAVEINFO
IF !TIME && !TIME:12
	PUTFORM {DAY+1}日目朝 
ELSEIF !TIME
	PUTFORM {DAY+1}日目昼 
ELSE
	PUTFORM {DAY+1}日目夜 
ENDIF

IF STRLENS(SAVESTR:11)
	PUTFORM %SAVESTR:11%
ELSE
	IF TARGET >= 0
		PUTFORM パートナー：
		CALL SET_COLOR(NO:TARGET)
		PUTFORM %NAME:TARGET%
		RESETCOLOR
		SIF ((FLAG:23 & 1p26) == 0) && FLAG:2 != 1
			PUTFORM (好感度：{CFLAG:2}) 
	ENDIF
	SIF ASSI >= 0
		PUTFORM 助手：%NAME:ASSI%
ENDIF

IF FLAG:2 == 1
	PUTFORM  I-
ELSE
	PUTFORM  
ENDIF

SIF FLAG:5 == 0
	PUTFORM E@SY
SIF FLAG:5 == 1
	PUTFORM NORM@L
SIF FLAG:5 == 2
	PUTFORM H@RD
SIF FLAG:5 == 3
	PUTFORM M@STER
SIF FLAG:5 == 4
	PUTFORM OverM@STER
SIF FLAG:5 == 9
	PUTFORM EXTR@
SIF FLAG:5 == 10
	PUTFORM P@RANOIA

SIF FLAG:26 > 1
	PUTFORM  {FLAG:26}周目

SIF FLAG:28
	PUTFORM  ☆

;コンフィグでセーブデータにメモを付けるをONにした場合メモを付けられる
;TFLAG:99が0の時でないと表示されないのは、オートセーブ時に毎回メモの入力を求められないようにするため
IF TFLAG:99 == 0 && FLAG:23 & 1p24
	PRINTL メモを入力して下さい。何も入力しない場合メモが省略されます。
	INPUTS
	SIF RESULTS != ""
		PUTFORM 【%RESULTS%】
ENDIF

@SHOW_EQUIP_2
;状況の表示
;調教対象には使わない、特殊な着脱式の道具を追加した場合はここに追加をしてください
;（場所変更、マスターや助手が使用する道具等）
IF TEQUIP:1
	IF NAME_CSV(NO:TARGET, 0) == "慧音"
		PRINTFORM  [ハクタク化]
	ELSEIF ASSIPLAY
		PRINTFORM  [ハクタク化](助手)
	ENDIF
ENDIF
IF TEQUIP:2
	CALL DATE_NAME
	PRINTFORM  [デート中(%PLACE_NAME(TEQUIP:デート中)%)]
ENDIF

IF TEQUIP:4
	ADDCHARA TEQUIP:4
	A = CHARANUM-1
	PRINTFORM  [%CALLNAME:A%から貰ったアクセサリ装着中]
	DELCHARA A 
ENDIF

IF TEQUIP:53
	V = 10 - TFLAG:70 + 1
	PRINTFORM  [撮影中(残{V}回)]
ENDIF
SIF TEQUIP:54
	PRINT  [野外プレイ中]
IF TEQUIP:57 == 2
	PRINT  [羞恥（浄玻璃の鏡）プレイ中]
ELSEIF TEQUIP:57
	PRINT  [羞恥（大鏡）プレイ中]
ENDIF
SIF TEQUIP:58
	PRINT  [お風呂場プレイ中]
SIF TEQUIP:59
	PRINT  [新妻プレイ中]
SIF TEQUIP:60
	PRINT  [スク水プレイ中]
SIF TEQUIP:62
	PRINT  [お医者プレイ中]
SIF TEQUIP:69
	PRINT  [女体盛りプレイ中]
SIF TEQUIP:78
	PRINT  [鰻風呂入浴中]
SIF TEQUIP:92
	PRINT  [蟲風呂入浴中]
SIF TEQUIP:80
	PRINT  [暗闇展開中]
SIF TEQUIP:90
	PRINT  [触手召喚中]
SIF TEQUIP:23 > 0
	PRINTFORM  [幽明の苦輪発動中：残り{TEQUIP:23}ターン]
;キャラごと固有のコスチューム表示可能にする関数(Notウフフ用)
CALL COSTUME_SHOW
PRINTL  

@SHOW_EQUIP_1
;使用中の道具を表示する
;一度使用したら解除するまで止まらない道具や調教を
;追加した場合はここに追加をしてください
IF TEQUIP:PLAYER:43 || TEQUIP:PLAYER:44 || TEQUIP:PLAYER:45
	PRINTFORM 使用中(%NAME:PLAYER%) 
	SIF TEQUIP:PLAYER:43
		PRINTFORM [アイマスク]
	SIF TEQUIP:PLAYER:44
		PRINTFORM [縄で緊縛]
	SIF TEQUIP:PLAYER:45
		PRINTFORM [ボールギャグ]
	PRINTL  
ENDIF

;日常用TEQUIP解除
;ウフフ中ならこれらは解除
IF TFLAG:44 == 1
	TEQUIP:7 = 0
	TEQUIP:20 = 0
	TEQUIP:36 = 0
ENDIF

IF TEQUIP:5 || TEQUIP:7 || TEQUIP:11 || TEQUIP:13 || TEQUIP:14 || TEQUIP:15 || TEQUIP:16 || TEQUIP:17 || TEQUIP:18 || TEQUIP:19 || TEQUIP:20 || TEQUIP:21 || TEQUIP:22 || TEQUIP:25 || TEQUIP:36 || TEQUIP:43 || TEQUIP:44 || TEQUIP:45 || TEQUIP:46 || TEQUIP:47 || TEQUIP:48 || TEQUIP:49 || TEQUIP:61 || TEQUIP:70 || TEQUIP:71 || TEQUIP:72 || TEQUIP:73 || TEQUIP:74 || TEQUIP:75 || TEQUIP:76 || TEQUIP:79 || TEQUIP:86 || TEQUIP:87 || TEQUIP:98 || TEQUIP:65
	PRINTFORM 使用中(%NAME:TARGET%) 

SIF TEQUIP:21
	PRINT [媚薬効果発揮中]
SIF TEQUIP:22
	PRINT [利尿剤効果発揮中]
SIF TEQUIP:86
	PRINT [排卵誘発剤効果発揮中]
SIF TEQUIP:87
	PRINT [緊急避妊薬準備済み]
SIF TEQUIP:74
	PRINT [鈴蘭の毒効果発揮中]
SIF TEQUIP:75
	PRINT [昆虫採集セットの薬効果発揮中]

IF TEQUIP:11 && TEQUIP:90
	PRINT [触手挿入]
ELSEIF TEQUIP:11
	PRINT [バイブ]
ENDIF

IF TEQUIP:13 && TEQUIP:90
	PRINT [触手アナル挿入]
ELSEIF TEQUIP:13
	PRINT [アナルバイブ]
ENDIF

IF TEQUIP:14 && TEQUIP:90
	PRINT [触手クリ責め]
ELSEIF TEQUIP:14
	PRINT [クリキャップ]
ENDIF

IF TEQUIP:15 && TEQUIP:90
	PRINT [触手乳首責め]
ELSEIF TEQUIP:15
	PRINT [二プルキャップ]
ENDIF

IF TEQUIP:16 && TEQUIP:90
	PRINT [触手搾乳]
ELSEIF TEQUIP:16
	PRINT [搾乳器]
ENDIF

SIF TEQUIP:76
	PRINT [サラシ]

IF TEQUIP:17 && TEQUIP:90
	PRINT [触手ペニス責め]
ELSEIF TEQUIP:17
	PRINT [オナホール]
ENDIF

IF TEQUIP:44 && TEQUIP:90
	PRINT [触手緊縛]
ELSEIF TEQUIP:44 && TEQUIP:72 == 0 && TEQUIP:73 == 0
	PRINT [縄で緊縛]
ELSEIF TEQUIP:44 && TEQUIP:72 && TEQUIP:73 == 0
	PRINT [荊で緊縛]
ELSEIF TEQUIP:44 && TEQUIP:73 && TEQUIP:72 == 0
	PRINT [蜘蛛の糸で緊縛]
ENDIF

IF TEQUIP:46 && TEQUIP:90
	PRINT [触手浣腸]
ELSEIF TEQUIP:46
	PRINT [浣腸＋アナルプラグ]
ENDIF
SIF TEQUIP:98
	PRINT [触手口辱]

SIF TEQUIP:43 && TEQUIP:73 == 0
	PRINT [アイマスク]
SIF TEQUIP:45
	PRINT [ボールギャグ]
SIF TEQUIP:18
	PRINT [シャワー]
SIF TEQUIP:19
	PRINT [アナルビーズ]
SIF TEQUIP:47
	PRINT [空気浣腸]
SIF TEQUIP:48
	PRINT [拡張バルーン]
SIF TEQUIP:49
	PRINT [アナル電極]
SIF TEQUIP:61
	PRINT [クスコ]
SIF TEQUIP:71
	PRINT [焼芋挿入中]
SIF TEQUIP:70
	PRINT [巨峰挿入中]
IF TEQUIP:79
	SIF TEQUIP:79 == 1 || TEQUIP:79 == 2
		PRINT [氷柱挿入中]
	SIF TEQUIP:79 == 3
		PRINT [極太氷柱挿入中]
	SIF TEQUIP:79 >= 4
		PRINT [氷塊挿入中]
ENDIF
;SIF TEQUIP:25
;	PRINTFORM [%CALLNAME:PLAYER%押倒中]

;キャラごと固有のコスチューム表示可能にする関数(ウフフ用)
CALL COSTUME_PLAY_SHOW
;コスプレは固有表示にする為、固有表示されてないこと確認
IF RESULT == 1
	;キャラごと固有のコスチューム表示
ELSEIF TEQUIP:65 == 1
	PRINT [学ラン]
ELSEIF TEQUIP:65 == 2
	PRINT [セーラー服]
ELSEIF TEQUIP:65 == 3
	PRINT [ブルマ]
ELSEIF TEQUIP:65 == 4
	PRINT [水着]
ELSEIF TEQUIP:65 == 5
	PRINT [スク水（紺）]
ELSEIF TEQUIP:65 == 6
	PRINT [スク水（白）]
ELSEIF TEQUIP:65 == 7
	PRINT [白衣]
ELSEIF TEQUIP:65 == 8
	PRINT [ナース服]
ELSEIF TEQUIP:65 == 9
	PRINT [女性警察官制服]
ELSEIF TEQUIP:65 == 10
	PRINT [ボンテージスーツ]
ELSEIF TEQUIP:65 == 11
	PRINT [浴衣]
ELSEIF TEQUIP:65 == 12
	PRINT [巫女服]
ELSEIF TEQUIP:65 == 13
	PRINT [巫女服（博）]
ELSEIF TEQUIP:65 == 14
	PRINT [巫女服（守）]
ELSEIF TEQUIP:65 == 15
	PRINT [メイド服]
ELSEIF TEQUIP:65 == 16
	PRINT [メイド服（紅）]
ELSEIF TEQUIP:65 == 17
	PRINT [裸リボン]
ELSEIF TEQUIP:65 == 18
	PRINTFORM [小悪魔風衣装]
ELSEIF TEQUIP:65 == 19
	PRINTFORM [魔法少女コス]
ELSEIF TEQUIP:65 == 20
	PRINTFORM [ゴスロリ]
ELSEIF TEQUIP:65 == 21
	PRINTFORM [バニーガール]
ELSEIF TEQUIP:65 == 22
	PRINTFORM [裸Yシャツ]
ELSEIF TEQUIP:65 == 23
	PRINTFORM [%NAME:TARGET%の服]
ELSEIF TEQUIP:65 == 24
	PRINTFORM [%NAME:MASTER%の服]
ELSEIF TEQUIP:65 == 255
	PRINTFORM [ボロボロの布切れ]
ENDIF

;調合用TEQUIP
SIF TEQUIP:5 == 1
	PRINT [病気平癒守：耐力体力回復・中]

;日常用TEQUIP
SIF TEQUIP:7
	PRINT  [炬燵]
SIF TEQUIP:20
	PRINT  [オムツ着用中]
SIF TEQUIP:36
	PRINT  [ローター装着中]

;ココより↑にTEQUIPに登録したものを書き込む
PRINTL  
ENDIF
IF TEQUIP:3
	PRINT インセンス使用中(
	SIF TEQUIP:3 == 1
		PRINT シダーウッド：体力消費軽減・小
	SIF TEQUIP:3 == 2
		PRINT サイプレスウッド：体力消費軽減・中
	SIF TEQUIP:3 == 3
		PRINT アローズウッド：体力消費軽減・大
	SIF TEQUIP:3 == 4
		PRINT ペパーミント：気力消費軽減・小
	SIF TEQUIP:3 == 5
		PRINT メリッサ：気力消費軽減・中
	SIF TEQUIP:3 == 6
		PRINT ミルトス：気力消費軽減・大
	SIF TEQUIP:3 == 7
		PRINT ジャスミン：ムード上昇・小
	SIF TEQUIP:3 == 8
		PRINT ラヴェンダー：ムード上昇・中
	SIF TEQUIP:3 == 9
		PRINT ムスク：ムード上昇・大
	SIF TEQUIP:3 == 10
		PRINT フランキンセンス：体力気力消費軽減＋ムード上昇
	SIF TEQUIP:3 == 11
		PRINT 竜印香炉：体力回復・小
	PRINTL )
ENDIF



;↓↓↓新パラメータ表示↓↓↓
@NEW_PRINT_PALAM
;PALAMの並び設定
CALL PALAM_SORT

;SQJ用酒気・情感（ムード）表示
TRYCALL MOOD_SHOW2

;REPEAT回数をLOCALに代入
LOCAL = A:0
;改行用にLOCAL:1を使用
LOCAL:1 = 0

REPEAT LOCAL

;パラメータを表示する順番を並べ替える
A = X:COUNT

;現在のパラメータレベルをBに代入
IF PALAM:A < PALAMLV:1
	B = 0
ELSEIF PALAM:A < PALAMLV:2
	B = 1
ELSEIF PALAM:A < PALAMLV:3
	B = 2
ELSEIF PALAM:A < PALAMLV:4
	B = 3
ELSEIF PALAM:A < PALAMLV:5
	B = 4
ELSEIF PALAM:A < PALAMLV:6
	B = 5
ELSEIF PALAM:A < PALAMLV:7
	B = 6
ELSEIF PALAM:A < PALAMLV:8
	B = 7
ELSEIF PALAM:A < PALAMLV:9
	B = 8
ELSEIF PALAM:A < 1000000
	B = 9
ELSEIF PALAM:A < 5000000
	B = 10
ELSEIF PALAM:A < 30000000
	B = 11
ELSEIF PALAM:A < 100000000
	B = 12
ELSE
	B = 13
ENDIF

;パラメータの名前・パラメータレベル・ゲージを表示
IF B < 10
	PRINTFORM 　%PALAMNAME:A%Lv{B}
	E = B + 1
	O = PALAMLV:B
	SIF B < 9
		P = PALAMLV:E
	SIF B == 9
		P = 1000000
ELSEIF B == 10
	PRINTFORM 　%PALAMNAME:A%LvA
	O = 1000000
	P = 5000000
ELSEIF B == 11
	PRINTFORM 　%PALAMNAME:A%LvB
	O = 5000000
	P = 30000000
ELSEIF B == 12
	PRINTFORM 　%PALAMNAME:A%LvC
	O = 30000000
	P = 100000000
ELSEIF B == 13
	PRINTFORM 　%PALAMNAME:A%LvD
ENDIF
IF FLAG:23 & 256
	PRINT  
ELSE
	PRINT [
ENDIF

;これだけ特殊
IF A == 3 && PALAM:A >= 20000
	IF FLAG:23 & 256
		CALL PRINT_COLORBAR, 1, 1, 8, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("しろ"), RESULT:1
		PRINT    濡れ
	ELSE
		PRINT ********]  濡れ
	ENDIF
	GOTO NEW_PRINT_PALAM_NUM_END
ENDIF

;パラメータレベルが13以上なら余計な処理は飛ばす
IF B >= 13
	IF FLAG:23 & 256
		IF A >= 11 && A <= 13
			CALL PRINT_COLORBAR, 1, 1, 8, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("赤"), RESULT:1
		ELSE
			CALL PRINT_COLORBAR, 1, 1, 8, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("薄青"), RESULT:1
		ENDIF
	ELSE
		PRINT ********
	ENDIF
	GOTO NEW_PRINT_PALAM_END
ENDIF


;パラメータレベルごとの閾値の8分の1を1メモリとする
;C = PALAM:A/(PALAMLV:(B+1)/8)
;E = B+1
C = PALAM:A/(P/8)

;↓のコメントアウトすると、パラメータ表示のゲージが
;↓従来の現在のレベル→次のレベルに必要な量を基準としたものから
;↓パラメータの総量を基準にしたものになります。
;↓例えば、パラメータが5000（レベル３）のときはこんな感じに。
;↓　新型 [****....] Now:5000 / Next:10000 （総量として必要な10000が基準）
;↓　従来 [**......] Now:2000 / Next: 1000 （LV3→LV4に必要な1000が基準）

C = (PALAM:A-O)/((P-O)/8)

D = 8-C

;パラメータレベルに応じて溜まっている部分に記号を表示
$NEW_PRINT_PALAM_C
SIF C == 0
	GOTO NEW_PRINT_PALAM_D
IF FLAG:23 & 256
	IF A == 3
		SETCOLOR 0xC0C0C0
	ELSEIF A >= 11 && A <= 13
		IF B <= 2
			SETCOLOR 0xFFCCFF
		ELSEIF B == 3
			SETCOLOR 0xF06050
		ELSE
			SETCOLOR 0xC07070
		ENDIF
	ELSE
		IF B <= 2
			SETCOLOR 0xFFCCFF
		ELSEIF B == 3
			SETCOLOR 0xC0B050
		ELSE
			SETCOLOR 0x50B0FF
		ENDIF
	ENDIF
	PRINTFORM %UNICODE(0x2584)%
	RESETCOLOR
ELSEIF FLAG:23 & 512
	SIF B == 0
		PRINT -
	SIF B == 1
		PRINT =
	SIF B == 2
		PRINT >
	SIF B == 3
		PRINT *
	SIF B == 4
		PRINT #
	SIF B == 5
		PRINT /
	SIF B == 6
		PRINT %
	SIF B == 7
		PRINT &
	SIF B == 8
		PRINT X
	SIF B == 9
		PRINT ~
	SIF B == 10
		PRINT $
	SIF B == 11
		PRINT ?
	SIF B == 12
		PRINT !
ELSE
	SIF B >= 0
		PRINT *
ENDIF
C -= 1
GOTO NEW_PRINT_PALAM_C

;溜まっていない部分に1Lv下の記号を表示
$NEW_PRINT_PALAM_D
SIF D == 0
	GOTO NEW_PRINT_PALAM_END
IF FLAG:23 & 256
	IF A == 3
		SETCOLOR 0x202020
	ELSEIF A >= 11 && A <= 13
		IF B <= 2
			SETCOLOR 0x300020
		ELSEIF B == 3
			SETCOLOR 0x701000
		ELSE
			SETCOLOR 0x502020
		ENDIF
	ELSE
		IF B <= 2
			SETCOLOR 0x300020
		ELSEIF B == 3
			SETCOLOR 0x505020
		ELSE
			SETCOLOR 0x002060
		ENDIF
	ENDIF
	PRINTFORM %UNICODE(0x2584)%
	RESETCOLOR
ELSE
	PRINT .
ENDIF
D -= 1
GOTO NEW_PRINT_PALAM_D

$NEW_PRINT_PALAM_END
IF FLAG:23 & 256
	PRINT  
ELSE
	PRINT ]
ENDIF

;↓↓↓↓kMGT表示↓↓↓↓
;SQJ用酒気・情感（ムード）表示だけは別
IF A == 19 || A == 20
	A = PALAM:A / 100
ELSE
	A = PALAM:A
ENDIF
B = 0
;6桁までノーマル
IF A > 999999
	;kキロ(1000)
	A /= 1000
	B += 1
	IF A > 99999
		;Mメガ(百万)
		A /= 1000
		B += 1
		;2^31 ≒ 21億 = 2100M = 2.1G
		;eramakerの32ビット整数ならメガまでで十分
		IF A > 99999
			;Gギガ(十億)
			A /= 1000
			B += 1
			IF A > 99999
				;Tテラ(兆)
				A /= 1000
				B += 1
				IF A > 99999
					;Pペタ(千兆)
					A /= 1000
					B += 1
					;2^63 ≒ 920京 = 9200P = 9.2E
					;Emueraの64ビット整数でもペタまでで十分
				ENDIF
			ENDIF
		ENDIF
	ENDIF
ENDIF

;数値の桁数に応じて間隔を調整
SIF A < 10
	PRINT  
SIF A < 100
	PRINT  
SIF A < 1000
	PRINT  
SIF A < 10000
	PRINT  
;接尾語が入るなら1つ減らす
SIF A < 100000 && B == 0
	PRINT  

PRINTFORM {A}
IF B == 1
	PRINT k
ELSEIF B == 2
	PRINT M
ELSEIF B == 3
	PRINT G
ELSEIF B == 4
	PRINT T
ELSEIF B == 5
	PRINT P
ENDIF
;↑↑↑↑kMGT表示↑↑↑↑

;↓↓↓↓通常表示↓↓↓↓
;
;	;数値の桁数に応じて間隔を調整
;	SIF PALAM:A < 10
;		PRINT  
;	SIF PALAM:A < 100
;		PRINT  
;	SIF PALAM:A < 1000
;		PRINT  
;	SIF PALAM:A < 10000
;		PRINT  
;	SIF PALAM:A < 100000
;		PRINT  
;	;数値を表示・999999を超えたら999999
;	IF PALAM:A > 999999
;		PRINT 999999
;	ELSE
;		PRINTFORM {PALAM:A}
;	ENDIF
;
;↑↑↑↑通常表示↑↑↑↑

$NEW_PRINT_PALAM_NUM_END
LOCAL:1 += 1
;改行するのか？ 続けて出力するのか？
IF LOCAL:1 > 2
	PRINTL 
	LOCAL:1 = 0
ELSE
	PRINT 
ENDIF

REND
;最後のループで改行してなかったら、ここで改行しておく
SIF LOCAL:1 != 0
	PRINTL 
;SQJ用酒気・情感（ムード）表示で使用したPALAM:19,20を初期化
PALAM:19 = 0
PALAM:20 = 0
;↑↑↑新パラメータ表示↑↑↑

;-----------------------------------------------
;最大体力等調整処理
;-----------------------------------------------
@LIFE_LIMIT
;最大体力が9999を超えていたら9999に合わせる
SIF MAXBASE:0 > 9999
	MAXBASE:0 = 9999
SIF MAXBASE:MASTER:0 > 9999
	MAXBASE:MASTER:0 = 9999
;最大気力が9999を超えていたら9999に合わせる
SIF MAXBASE:1 > 9999
	MAXBASE:1 = 9999
SIF MAXBASE:MASTER:1 > 9999
	MAXBASE:MASTER:1 = 9999
;最大耐力が999999999999999999を超えていたら999999999999999999に合わせる
SIF MAXBASE:HP > 999999999999999999
	MAXBASE:HP = 999999999999999999
SIF MAXBASE:MASTER:HP > 999999999999999999
	MAXBASE:MASTER:HP = 999999999999999999

;体力が9999を超えていたら9999に合わせる
SIF BASE:0 > 9999
	BASE:0 = 9999
SIF BASE:MASTER:0 > 9999
	BASE:MASTER:0 = 9999
;気力が9999を超えていたら9999に合わせる
SIF BASE:1 > 9999
	BASE:1 = 9999
SIF BASE:MASTER:1 > 9999
	BASE:MASTER:1 = 9999
;耐力が999999999999999999を超えていたら999999999999999999に合わせる
SIF BASE:HP > 999999999999999999
	BASE:HP = 999999999999999999
SIF BASE:MASTER:HP > 999999999999999999
	BASE:MASTER:HP = 999999999999999999

;体力等調整処理(最大値まで)
CALL LIFE_LIMIT_MAXBASE

;-----------------------------------------------
;体力等調整処理(最大値まで)
;-----------------------------------------------
@LIFE_LIMIT_MAXBASE
;J用アイテムにより一時的に体力上限がなくなっていれば最大値に合わせない
IF TEQUIP:41 == 0
	;体力が上限を超えていたら上限に合わせる
	SIF BASE:0 > MAXBASE:0
		BASE:0 = MAXBASE:0
	SIF BASE:MASTER:0 > MAXBASE:MASTER:0
		BASE:MASTER:0 = MAXBASE:MASTER:0
ENDIF
;気力が上限を超えていたら上限に合わせる
SIF BASE:1 > MAXBASE:1
	BASE:1 = MAXBASE:1
SIF BASE:MASTER:1 > MAXBASE:MASTER:1
	BASE:MASTER:1 = MAXBASE:MASTER:1
;耐力が上限を超えていたら上限に合わせる
SIF BASE:HP > MAXBASE:HP
	BASE:HP = MAXBASE:HP
SIF BASE:MASTER:HP > MAXBASE:MASTER:HP
	BASE:MASTER:HP = MAXBASE:MASTER:HP

;-------------------------------------------------
;記念日
;-------------------------------------------------
@SHOW_DAY_INFO(ARG:0)
;ARG:0 対象
;表示する記念日がなければRETURN
SIF TALENT:(ARG:0):89 == 0 && TALENT:(ARG:0):134 == 0 && CFLAG:(ARG:0):75 == 0 && CFLAG:(ARG:0):77 == 0
	RETURN 0

DRAWLINE
PRINTL □ 記念日
IF TIME:2  && ARG:0 == MASTER
	IF TIME:3 == 0
		TSTR:2 = 春の
	ELSEIF TIME:3 == 1
		TSTR:2 = 夏の
	ELSEIF TIME:3 == 2
		TSTR:2 = 秋の
	ELSEIF TIME:3 == 3
		TSTR:2 = 冬の
	ENDIF
	PRINTFORML 誕生日：%TSTR:2%月 {TIME:2}日
ENDIF

;結婚記念日
IF TALENT:(ARG:0):89
	IF TIME:10 == 0
		TSTR:2 = 春の
	ELSEIF TIME:10 == 1
		TSTR:2 = 夏の
	ELSEIF TIME:10 == 2
		TSTR:2 = 秋の
	ELSEIF TIME:10 == 3
		TSTR:2 = 冬の
	ENDIF
	
	IF TIME:9
		PRINTFORML 結婚記念日：%TSTR:2%月 {TIME:9}日
	ELSE
		PRINTFORML 婚約者：%NAME:MASTER%
	ENDIF
ENDIF
IF TALENT:(ARG:0):134
	PRINTFORML 出産予定日まで{CFLAG:(ARG:0):110-DAY:7}日
ENDIF

IF CFLAG:(ARG:0):76 == 0
	TSTR:2 = 春の
ELSEIF CFLAG:(ARG:0):76 == 1
	TSTR:2 = 夏の
ELSEIF CFLAG:(ARG:0):76 == 2
	TSTR:2 = 秋の
ELSEIF CFLAG:(ARG:0):76 == 3
	TSTR:2 = 冬の
ELSE
	TSTR:2 = ミス
ENDIF

IF CFLAG:(ARG:0):75 > 0 && ARG:0 != MASTER
	PRINTFORML 仲間になった日：%TSTR:2%月 {CFLAG:(ARG:0):75}日
ENDIF

IF CFLAG:(ARG:0):77 > 0 && ARG:0 != MASTER
	PRINTFORML 仲間になってから{CFLAG:(ARG:0):77}日
ENDIF

;=============================================================================
;各種ゲージ計算・表示処理
;=============================================================================
;-------------------------------------------------
;酒気表示新バージョン
;バーはeraMeiQ外伝より引用
;-------------------------------------------------
@NEW_INTOXICATION_SHOW, ARG

PRINT 酒気
IF TALENT:217 != 0
	PRINTFORM %UNICODE(0x208D)%
	CALL PRINT_COLORBAR, TFLAG:47, 100, 10, UNICODE(0x2583), UNICODE(0x2583), BARCOLORSET("紫"), RESULT:1
	PRINTFORM %UNICODE(0x208E)%
ELSE
	PRINTFORM %UNICODE(0x208D)%
	CALL PRINT_COLORBAR, TFLAG:47, 100, 10, UNICODE(0x2583), UNICODE(0x2583), BARCOLORSET("紫"), RESULT:1
	PRINTFORM %UNICODE(0x208E)%
ENDIF

IF TFLAG:47 == 0
	TSTR = 素面
ELSEIF TFLAG:47 < 5
	TSTR = ほぼ素面
ELSEIF TFLAG:47 < 11
	TSTR = ほろ酔い
ELSEIF TFLAG:47 < 16
	TSTR = 千鳥足
ELSEIF TFLAG:47 < 30
	TSTR = へべれけ
ELSEIF TFLAG:47 < 60
	TSTR = 泥酔
ELSEIF TFLAG:47 < 100
	TSTR = 酒豪の仲間入り
ELSE
	TSTR = ちあキングクラス
ENDIF
PRINTFORML %TSTR, 16, LEFT%
RESETCOLOR
RETURN 0



;--------------------------------------------------
;ムード表示関数
;eratohoJのムード表示を小さく
;--------------------------------------------------
@NEW_MOOD_SHOW
PRINT 空気
PRINTFORM %UNICODE(0x208D)%
CALL PRINT_COLORBAR, TFLAG:37, 300, 10, UNICODE(0x2583), UNICODE(0x2583), BARCOLORSET("桃"), RESULT:1
PRINTFORM %UNICODE(0x208E)%
;CALL PRINT_BAR, TFLAG:37, 300, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("桃"), RESULT:1
;デート時のお酒でマークされる最大の下げ幅が30
IF (TFLAG:37+15) < 0
	PRINTFORM 険悪な
ELSEIF (TFLAG:37+5) < 0
	PRINTFORM 煙たがられる
ELSEIF TFLAG:37 == 0
	PRINTFORM 悪くない
ELSEIF TFLAG:37 < 10
	PRINTFORM 仲良く感じる
ELSEIF TFLAG:37 < 30
	PRINTFORM 打ち解け始める
ELSEIF TFLAG:37 < 50
	PRINTFORM 流され始める
ELSEIF TFLAG:37 < 100
	PRINTFORM 押し倒しても自然な
ELSEIF TFLAG:37 < 300
	PRINTFORM 大概の事は許せちゃう
ELSE
	PRINTFORM 制御不能な
ENDIF
PRINTFORM 程度のムード　

SELECTCASE TFLAG:96
	CASE IS < -12
		PRINTL （劇的に悪化）
	CASE IS < -7
		PRINTL （悪化）
	CASE IS < -2
		PRINTL （微妙に悪化）
	CASE IS > 2
		PRINTL （微妙に良化）
	CASE IS > 7
		PRINTL （良化）
	CASE IS > 12
		PRINTL （劇的に良化）
	CASEELSE
		PRINTL 
ENDSELECT

RETURN 0

;--------------------------------------------------
;酔い加減表示関数
;プレイしていて酔い加減が判らなくて困った…
;という訳で作者基準でホイホイ作ってみた
;上限が決まってない様なので上限表示はしないで曖昧評価
;--------------------------------------------------
;未成年飲酒は禁止だけど
;お酒を飲ませて酔っ払ったアイドルが見たいので、試しに元に戻す
@INTOXICATION_SHOW
PRINT 酒気
;酒豪持ち
IF TALENT:217 != 0
	CALL PRINT_BAR, TFLAG:47, 180, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("紫"), RESULT:1
ELSE
	CALL PRINT_BAR, TFLAG:47, 100, 32, UNICODE(0x2585), UNICODE(0x2585), BARCOLORSET("紫"), RESULT:1
ENDIF
IF TFLAG:47 == 0
	PRINTFORM 素面
ELSEIF TFLAG:47 < 5
	PRINTFORM ほぼ素面
ELSEIF TFLAG:47 < 11
	PRINTFORM ほろ酔い
ELSEIF TFLAG:47 < 16
	PRINTFORM 千鳥足
ELSEIF TFLAG:47 < 30
	PRINTFORM へべれけ
ELSEIF TFLAG:47 < 60
	PRINTFORM 泥酔
ELSEIF TFLAG:47 < 100
	PRINTFORM 酒豪の仲間入り
ELSE
	PRINTFORM ちあキングクラス
ENDIF
PRINTL
RETURN 0

