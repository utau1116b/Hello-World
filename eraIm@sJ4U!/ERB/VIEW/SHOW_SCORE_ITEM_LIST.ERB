@SHOW_SCORE_ITEM_LIST

;LOCAL:2	楽譜番号保存
DRAWLINE
PRINTL どの楽譜を使いますか？
DRAWLINE
FOR LOCAL:0, 200, 499
	IF ITEM:(LOCAL:0) > 0
		SELECTCASE LOCAL:0
			CASE 200 TO 299
				CALL SET_COLOR(1)
				PRINTFORM ♪
				RESETCOLOR
			CASE 300 TO 399
				CALL SET_COLOR(2)
				PRINTFORM ♪
				RESETCOLOR
			CASE 400 TO 499
				CALL SET_COLOR(3)
				PRINTFORM ♪
				RESETCOLOR
			CASEELSE
				
		ENDSELECT
		PRINTFORML [{LOCAL:0,3}] %ITEMNAME:(LOCAL:0),10,LEFT% {ITEM:(LOCAL:0),2}個
	ENDIF
NEXT
PRINTL [0]戻る
$INPUT_LOOP
INPUT
IF RESULT == 0
	RETURN
ELSEIF RESULT >= 201 && RESULT <= 500 && ITEM:(RESULT)
	LOCAL:2 = RESULT
	TRYCALLFORM SHOW_SKILL_EXPLAIN_{RESULT}
	PRINTFORMW 
	PRINTFORMW %ITEMNAME:(LOCAL:2)%を修得しますか？
	PRINTL [0]はい
	PRINTL [1]いいえ
	$INPUT_LOOP_2
	INPUT
	IF RESULT == 0
		PRINTL 誰が修得しますか？
		FOR LOCAL:1, 1080, 1085
			IF FLAG:(LOCAL:1) > 10
				;PRINTFORMW {FLAG:(LOCAL:1)}
				PRINTFORML [{LOCAL:1 - 1079}] %CALLNAME:(FLAG:(LOCAL:1))%
			ENDIF
		NEXT
		PRINTL [0]やっぱりやめる
		$INPUT_LOOP_3
		INPUT
		IF RESULT == 0
			RESTART
		ELSEIF RESULT >= 1 && RESULT <= 5
			IF ABL:(FLAG:(1079 + RESULT)):(LOCAL:2 + 100) <= 0
				CALL LEARN_SKILL((FLAG:(1079 + RESULT)), (LOCAL:2 + 100), 0)
				ITEM:(LOCAL:2) -= 1
			ELSE
				REUSELASTLINE %(CALLNAME:(FLAG:(1079 + RESULT)))%は既に修得しています。
				GOTO INPUT_LOOP_3
			ENDIF
		ELSE
		ENDIF
	ELSEIF RESULT == 1
		RESTART
	ELSE
		REUSELASTLINE 入力値が不正です。
		GOTO INPUT_LOOP_2
	ENDIF
ELSE
	REUSELASTLINE 入力値が不正です。
	RESTART
ENDIF
RESTART
