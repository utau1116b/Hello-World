@UNITSTATUS
VARSET LOCAL
CUSTOMDRAWLINE =
;ユニットステータス表示
	;一行目
;PRINTFORML [201]画面変更
;DRAWLINE
IF FLAG:ショップ画面管理
	SKIPDISP 1
ELSE
	SKIPDISP 0
ENDIF
	PRINTL ＵＮＩＴ
	STR = 
	;二行目
	;VO
	;レベルによってユニット名色替え
	SELECTCASE ユニットレベル()
		;白
		CASE 0 TO 2
			CALL SET_COLOR("雪歩")
		;黄緑
		CASE 3 TO 4
			CALL SET_COLOR("美希")
		;緑
		CASE 5 TO 6
			CALL SET_COLOR("律子")
		;水色
		CASE 7 TO 8
			CALL SET_COLOR("響")
		;青
		CASE 9 TO 10
			CALL SET_COLOR("千早")
		;桃
		CASE 11 TO 12
			CALL SET_COLOR("伊織")
		;黄
		CASE 13 TO 14
			CALL SET_COLOR("亜美")
		;橙
		CASE 15 TO 16
			CALL SET_COLOR("やよい")
		;赤
		CASE 17 TO 18
			CALL SET_COLOR("春香")
		;紫
		CASE 19 TO 20
			CALL SET_COLOR("あずさ")
		CASEELSE
			CALL SET_COLOR("デフォルト")
	ENDSELECT
	PRINTFORM Lv
	PRINTFORM {ユニットレベル(),3,LEFT}
	PRINTFORM %CSTR:0:22,20,LEFT%
	RESETCOLOR
	PRINTFORM （ユニット状態：%PRINT_ユニット状態()%）
	PRINTFORM （団結力：%ADD_COMMA(SUM_団結値())%）
	IF FLAG:記者
		PRINTFORM （記者：%記者名()%）
	ELSE
		PRINTFORM （記者：%SAVESTR:199%）
	ENDIF
	PRINTL 
	
	CALL お任せ時スコア
	LOCALS = イメージ：%ADD_COMMA(RESULT)%
	PRINTFORM %LOCALS%
	PRINTL 
	;三行目
	LOCAL = SUM_ファン数()
	PRINTFORM ファン数：
	LOCALS = %ADD_COMMA(LOCAL)%人
	PRINTFORM %LOCALS%
	PRINTL 
	
	[SKIPSTART]
	;四行目;VO
	;DRAWLINE
	FOR LOCAL:0, 1080, 1085
		IF FLAG:(LOCAL:0) > 0
			LOCAL:1 += BASE:(FLAG:(LOCAL:0)):ベースボーカル
			LOCAL:2 += BASE:(FLAG:(LOCAL:0)):ベースビジュアル
			LOCAL:3 += BASE:(FLAG:(LOCAL:0)):ベースダンス
			LOCAL:4 += 1
	ENDIF
NEXT
;0除算にならないように
SIF LOCAL:4 <= 0
	LOCAL:4 = 1
LOCAL:1 /= LOCAL:4
LOCAL:2 /= LOCAL:4
LOCAL:3 /= LOCAL:4
PRINTFORM VO（{LOCAL:1, 4, LEFT}）
CALL NEWPRINT_VOVIDABAR(999, 81, 999)
PRINTL

PRINTFORM VI（{LOCAL:2, 4, LEFT}）
CALL NEWPRINT_VOVIDABAR(999, 82, 999)
PRINTL

	;六行目;DA
PRINTFORM DA（{LOCAL:3, 4, LEFT}）
CALL NEWPRINT_VOVIDABAR(999, 83, 999)
PRINTL
[SKIPEND]

	;七行目
;ユニット表記
DRAWLINE
;ALIGNMENT CENTER
	REPEAT 5
		SIF COUNT != 0
			PRINT ┃ 
		SIF FLAG:(1080 + COUNT) > 0
			SETCOLOR SET_COLOR_FUNC(FLAG:(1080 + COUNT))
		SIF FLAG:(1080 + COUNT) <= 0
			SETCOLOR COLOR("light-gray")
		PRINTBUTTON @"[0{COUNT+1}] \@(FLAG:(1080 + COUNT) > 0) ? %CALLNAME:(FLAG:(1080 + COUNT)),10,LEFT% # %"EMPTY",10,LEFT%\@", COUNT + 201
		;CALL HEARTMARK_B
		PRINT 　
		RESETCOLOR
	REND
	PRINTL 
	;八行目
	REPEAT 5
		SIF COUNT != 0
			PRINT ┃ 
		;SIF FLAG:(1080 + COUNT) > 0
		;	SETCOLOR SET_COLOR_FUNC(FLAG:(1080 + COUNT))
		SIF FLAG:(1080 + COUNT) <= 0
			SETCOLOR COLOR("light-gray")
		IF FLAG:(1080+COUNT) > 0
			PRINTFORM 調子：%PRINT_アイドル状態(FLAG:(1080+COUNT)), 9%
		ELSE
			PRINTFORM 調子：%SAVESTR:199,9%
		ENDIF
		PRINT 　
		RESETCOLOR
	REND
	PRINTL 
	REPEAT 5
		SIF COUNT != 0
			PRINT ┃ 
		;SIF FLAG:(1080 + COUNT) > 0
		;	SETCOLOR SET_COLOR_FUNC(FLAG:(1080 + COUNT))
		SIF FLAG:(1080 + COUNT) <= 0
			SETCOLOR COLOR("light-gray")
		PRINTFORM 疲労：\@(FLAG:(1080 + COUNT) > 0) ? {BASE:(FLAG:(1080 + COUNT)):ストレス,9} # %"0",9%\@
		PRINT 　
		RESETCOLOR
	REND
	PRINTL 
	ALIGNMENT LEFT
DRAWLINE
SKIPDISP 0
@SHOP_MAINMENU
;スケジュールはスケジュール選択後に、スケジュール入力欄に表示
PRINTFORM {DAY:3}年 %STR:2%月 {DAY:1}日 (%STR:1%) 天気:%STR:3% {DAY+1}日目(%STR:4%)  
PRINTFORML %STR:5%
DRAWLINE
;@@@(気になる部分)
;イベント内容が表示されない
PRINTFORM [朝]：
IF FLAG:午前の予定 == 140
	;SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM SUB_EVENT_NAME_{SUBEVENT}
	PRINTFORM %TSTR, 24, LEFT%
ELSEIF FLAG:午前の予定 == 150
	;SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM KOJO_EVENT_NAME_{FLAG:イベント用ターゲット一時保存}_{SCENARIO}
	PRINTFORM %TSTR, 24, LEFT%
ELSE
	SIF FLAG:午前の予定 == 0
		SETCOLOR COLOR("light-gray")
	PRINTFORM %GET_WORK_NAME(FLAG:午前の予定),24,LEFT%
ENDIF
RESETCOLOR
PRINTFORM  

PRINTFORM [昼]：
IF FLAG:午前の予定2 == 140
;	SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM SUB_EVENT_NAME_{SUBEVENT}
	PRINTFORM %TSTR, 24, LEFT%
ELSEIF FLAG:午前の予定2 == 150
	;SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM KOJO_EVENT_NAME_{FLAG:イベント用ターゲット一時保存}_{SCENARIO}
	PRINTFORM %TSTR, 24, LEFT%
ELSE
	SIF FLAG:午前の予定2 == 0
		SETCOLOR COLOR("light-gray")
	PRINTFORM %GET_WORK_NAME(FLAG:午前の予定2),24,LEFT%
ENDIF
RESETCOLOR
PRINTFORM  

PRINTFORM [夜]：
IF FLAG:午後の予定2 == 140
	;SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM SUB_EVENT_NAME_{SUBEVENT}
	PRINTFORM %TSTR, 24, LEFT%
ELSEIF FLAG:午後の予定2 == 150
	;SETCOLOR SET_COLOR_FUNC("真美")
	TRYCALLFORM KOJO_EVENT_NAME_{FLAG:イベント用ターゲット一時保存}_{SCENARIO}
	PRINTFORM %TSTR, 24, LEFT%
ELSE
	SIF FLAG:午後の予定2 == 0
		SETCOLOR COLOR("light-gray")
	PRINTFORM %GET_WORK_NAME(FLAG:午後の予定2),24,LEFT%
ENDIF
RESETCOLOR

PRINTL
DRAWLINE
;パートナー表示
IF TARGET >= 0
	LOCALS = %名前(TARGET, 2, 1, 1)%
	;パートナー：%NAME:TARGET%
	PRINTFORM パートナー：
	CALL SET_COLOR(NO:TARGET)
	PRINTFORM %LOCALS , 24, LEFT%
	RESETCOLOR
	;PRINTFORM がパートナーです
ELSE
	;LOCALS = %"パートナー：ＥＭＰＴＹ", 36, LEFT%
	CALL PRINTCOLOR , COLOR("light-gray"), @"%"パートナー：ＥＭＰＴＹ", 36, LEFT%"
ENDIF
PRINT   
PRINTBUTTON @"%"[130]変更", 11, LEFT%", 130
SIF ((FLAG:23 & 1p26) == 0) && FLAG:2 != 1
	PRINTFORM (好感度：{CFLAG:2})
LOCALS = （所持金：%ADD_COMMA(MONEY)%Ｇ）
PRINTFORM %LOCALS%　

PRINTL 

IF TARGET >= 0
	PRINT 体力 
	A = BASE:体力
	SIF BASE:体力 < 0
		A = 0
	;CALL PRINT_BAR_0, A, MAXBASE:0, 32
	CALL COMMON_SHOW_LIFEBAR1, TARGET, 1
	PRINTFORM  ({BASE:体力,4}/{MAXBASE:体力,4})
	PRINTL
	PRINT 気力 
	A = BASE:気力
	SIF BASE:気力 < 0
		A = 0
	CALL COMMON_SHOW_LIFEBAR2, TARGET, 1
	PRINTFORM  ({BASE:1,4}/{MAXBASE:1,4})
ELSE
	SETCOLOR (COLOR("light-gray"))
	PRINT 体力 
	CALL COMMON_SHOW_LIFEBAR1, TARGET, 1, 1
	PRINTFORM  (%"0",4%/%"0",4%)
	PRINTL 
	PRINT 気力 
	CALL COMMON_SHOW_LIFEBAR2, TARGET, 1, 1
	PRINTFORM  (%"0",4%/%"0",4%)
	RESETCOLOR
ENDIF
PRINTL 

;助手表示

IF ASSI > 0
	PRINTFORM 助手：
	LOCALS = %名前(ASSI, 2, 1, 1)%
	CALL SET_COLOR(NO:ASSI)
	PRINTFORM %LOCALS, 36, LEFT%
	RESETCOLOR
ELSE
	LOCALS = %"助手：ＥＭＰＴＹ", 36, LEFT%
	CALL PRINTCOLOR(COLOR("light-gray"), LOCALS)
ENDIF
PRINT   
SIF ASSI <= 0
	SETCOLOR (COLOR("light-gray"))
PRINTBUTTON @"%"[108]変更", 11, LEFT%", 108
RESETCOLOR
PRINTL 
IF ASSI > 0
	;PRINT           体力
	PRINT 体力 
	A = BASE:ASSI:0
	SIF BASE:ASSI:0 < 0
		A = 0
	CALL COMMON_SHOW_LIFEBAR1, ASSI, 1
	PRINTFORM  ({BASE:ASSI:体力,4}/{MAXBASE:ASSI:体力,4})

ELSE
	SETCOLOR (COLOR("light-gray"))
	PRINT 体力 
	CALL COMMON_SHOW_LIFEBAR1, ASSI, 1, 1
	PRINTFORM  (%"0",4%/%"0",4%)
	RESETCOLOR
ENDIF
PRINTL 

@UNIT_STATUS_SHOP


